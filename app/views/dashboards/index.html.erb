<div class="container mt-5 p-3">
  <div class="row">
    <div class="<%= ['owner', 'admin'].include?(current_user.role.name) ? 'col-md-6' : 'col-md-12' %>">
      <% if @projects_count_by_day.present? %>
        <%= line_chart @projects_count_by_day, title: t('project_statistics'), download: true %>
      <% else %>
        <h3>Projects Statistics by day</h3>
        <%= line_chart @projects_count_by_day, title: t('project_statistics'), download: true %>
      <% end %>
    </div>
    <% if ['owner', 'admin'].include?(current_user.role.name) %>
      <div class="col-md-6">
        <% if @users_count_by_role.present? %>
          <%= column_chart @users_count_by_role, title: t('users_statistics_by_role'), download: true %>
        <% else %>
          <h3>Users Statistics by role</h3>
          <%= column_chart @users_count_by_role, title: t('users_statistics_by_role'), download: true %>
        <% end %>
      </div>
    <% end %>
  </div>
  <div class="row mt-4">
    <div class="<%= ['owner', 'admin'].include?(current_user.role.name) ? 'col-md-6' : 'col-md-12' %>">
      <% if @issues_count_by_state.present? %>
        <%= pie_chart @issues_count_by_state, title: t('issues_statistics'), download: true %>
      <% else %>
        <h3><%= t('issues_statistics') %></h3>
        <%= pie_chart @issues_count_by_state, title: t('issues_statistics'), download: true %>
      <% end %>
    </div>
    <% if ['owner', 'admin'].include?(current_user.role.name) %>
      <div class="col-md-6">
        <% if @users_count_by_day.present? %>
          <%= area_chart @users_count_by_day, title: t('users_statistics'), download: true %>
        <% else %>
          <h3>Users Statistics</h3>
          <%= area_chart @users_count_by_day, title: t('users_statistics'), download: true %>
        <% end %>
      </div>
    </div>
  <% end %>
  <div class="row mt-4">
    <div class="col-12">
      <% data = [] %>
      <% data << { name: t('project.header'), data: @projects_count_by_day } if @projects_count_by_day.present? %>
      <% data << { name: t('issues.header'), data: @issues_count_by_day } if @issues_count_by_day.present? %>
      <% data << { name: t('comments'), data: @comments_count_by_day } if @comments_count_by_day.present? %>
      <%= line_chart data, title: t('project_issues_comments_stats'), loading: t('loading'), download: true %>
    </div>
  </div>
</div>